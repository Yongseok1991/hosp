<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>í‚¤ì›Œë“œ ì¡°í•©</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>ê°„ë‹¨í•œ ì§€ë„ í‘œì‹œí•˜ê¸°</title>
    <script
            src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=1wjo4eezo5"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .inputbox {
            margin-right: 5px;
        }
        textarea {
            resize: none;
            overflow: hidden;
        }
        .item-list {
            font-weight: bold;
            color: #f00;
        }
        #inputbox3 {
            margin-left: 5px;
        }
    </style>
</head>

<body>

<div th:insert="/nav :: nav"></div>

<div class="container" style="margin-top: 20px">
    <h3 style="display: inline"><strong>í‚¤ì›Œë“œ ì¡°í•©í•˜ê¸°</strong></h3>
    <button
            style="float: right"
            class="btn btn-success"
            onclick="resetFunction();"
    >
        ë¦¬ì…‹
    </button>
    <hr />
    <p>âˆš í•œ ì¤„ì— í•˜ë‚˜ì˜ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
    <p>âˆš í•˜ë‚˜ì˜ textareaëŠ” 10ê°œê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤. 10ê°œë¥¼ ì´ˆê³¼í•  ê²½ìš° textareaë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
    <p>âˆš textareaëŠ” ì´ 3ê°œê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
    <p>âˆš í‚¤ì›Œë“œëŠ” 4ê°œ ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”. (ì¤‘ë³µëœ í‚¤ì›Œë“œëŠ” ìë™ì œê±°)</p>

    <div id="inputBlock">
        <textarea
                class="inputbox"
                id="inputbox1"
                cols="30"
                rows="10"
        ></textarea>
    </div>
    <div>
        <table class="table table-striped">
            <thead>
            <tr>
                <td>
                    <p id="textLength" style="display: inline; font-weight: bold">
                        í‚¤ì›Œë“œ
                    </p>
                    <button
                            style="float: right"
                            id="keyWordBtn"
                            class="btn btn-primary"
                            onclick="keywordCombination();"
                    >
                        í‚¤ì›Œë“œ ì¡°í•©
                    </button>
                </td>
            </tr>
            </thead>
            <tbody>
            <tr id="key"></tr>
            </tbody>
        </table>
    </div>
    <button id="areaAdd" class="btn btn-warning">textarea ì¶”ê°€</button>
    <button id="areaDelete" class="btn btn-danger">textarea ì œê±°</button>
</div>
<script>
    $(function () {
        let sId = 1;
        $(document).on("click", "#areaAdd", () => {
            if (sId === 3) {
                alert("ë”ì´ìƒ ì¶”ê°€ í•˜ì‹¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return false;
            }
            $("#inputBlock").append(
                `<textarea class="inputbox" id='inputbox${++sId}' cols='30' rows='10'></textarea>`
            );
        });

        $(document).on("click", "#areaDelete", () => {
            if (sId === 1) {
                alert("ë”ì´ìƒ ì œê±° í•˜ì‹¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return false;
            }
            --sId;
            $("#inputBlock :last-child").remove();
        });
    });

    function keywordCombination() {
        $("#key").html("");
        let str = [];
        let inputbox = $(".inputbox");
        if (inputbox.val().length == 0) {
            alert("í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }

        $.each(inputbox, (i, item) => {
            let items = $(item).val().split("\n");
            $.each(items, (i, result) => {
                if (result != "") {
                    str.push(result);
                }
            });
        });

        let strDup = str.filter((val, idx) => {
            return str.indexOf(val) === idx;
        });
        if (strDup.length < 4) {
            alert("í‚¤ì›Œë“œë¥¼ 4ê°œ ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”. (ì¤‘ë³µëœ í‚¤ì›Œë“œ ìë™ ì œê±°)");
            return false;
        }
        let combi = getCombinations(strDup, 3);
        $.each(combi, (i, com) => {
            $("#key").append(
                `<li class='item-list'>${com.toString().replaceAll(",", " ")}</li>`
            );
        });
        let keywordLength = $(".item-list").length;
        $("#textLength").text(`í‚¤ì›Œë“œ (${keywordLength} ê°œ)`);
    }

    function getCombinations(arr, selectNumber) {
        const results = [];
        if (selectNumber === 1) return arr.map((value) => [value]);

        arr.forEach((fixed, index, origin) => {
            console.log(origin)
            const rest = origin.slice(index + 1);
            const combinations = getCombinations(rest, selectNumber - 1);
            const attached = combinations.map((combination) => [
                fixed,
                ...combination,
            ]);
            results.push(...attached);
        });
        return results;
    }

    function resetFunction() {
        location.reload();
    }
</script>
<div class="jumbotron text-center" style="margin-bottom: 0">
    <p>Created By Yong</p>
    <p>ğŸ“ 010-5023-2463</p>
    <p>ğŸ´ ê²½ê¸°ë„ ê³ ì–‘ì‹œ ì¼ì‚°ì„œêµ¬</p>
</div>

</body>

</html>