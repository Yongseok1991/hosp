<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <title>PCR 검사 병원 조회</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <title>간단한 지도 표시하기</title>
  <script
          src="https://code.jquery.com/jquery-3.6.0.min.js"
          integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
          crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
</head>

<body>

  <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">Yongdol</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="/">PCR 병원 조회</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/list">경기지역화폐 사용처 조회</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/qna">Q&A 게시판</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <h3><strong>Q&A</strong></h3>
    <p>사이트 이용 불편사항이나 질문사항을 올려주세요</p>
    <div class="container" style="margin-top: 3rem;">
      <div class="btn-group">
        <button class="btn btn-secondary" style="font-size: 1.0rem;" onclick="history.back()">돌아가기</button>
          <a href="#" style="font-size: 1.0rem;" class="btn btn-warning">수정</a>
          <button id="btn-delete" style="font-size: 1.0rem;" class="btn btn-danger">삭제</button>
      </div>
      <br> <br>
      <div>
        글번호 <span id="id"><i th:text="${board.id}"></i></span> 작성자 <span><i th:text="${board.writer}"> </i></span> 조회수 <span><i th:text="${board.count}"> </i></span> </span>작성시간 <span th:text="${#temporals.format(board.createDate, 'yyyy-MM-dd HH:mm')}">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      </div>
      <div>
        <h3 th:text="${board.title}"></h3>
      </div>
      <hr>
      <div>
        <div th:utext="${board.content}"></div>
      </div>
      <hr />
      <div class="card">
        <form>
          <input type="hidden" id="qnaId" th:value="${board.id}" />
          <div>
            <div class="card-body">
              <textarea id="reply-content" class="form-control" rows="1" cols=""></textarea>
            </div>
            <div class="card-footer">
              <button type="button" id="btn-reply-save" class="btn btn-primary">등록</button>
            </div>
          </div>
        </form>
      </div>
      <div class="card">
        <div class="card-header">댓글리스트</div>
        <ul id="reply-box" class="list-group">
          <th:block th:each="reply: ${board.reply}">
            <li id="reply-${reply.id}" class="list-group-item d-flex justify-content-between">
              <div th:text="${reply.content}"></div>
              <div class="d-flex">
                <div class="font-italic" th:text="|작성자 : ${reply.qna.writer}|"> &nbsp;</div>
                  <button onClick="" class="badge" style="color: black;">수정</button>
                  <button onClick="" class="badge" style="color: black;">삭제</button>

                <div><h6 style="padding-top: 5px;" th:text="${reply.createDate}"></h6></div>
              </div>
            </li>
          </th:block>
        </ul>
      </div>
    </div>
  </div>

  <div class="jumbotron text-center" style="margin-bottom: 0">
    <p>Created By Yong</p>
    <p>📞 010-5023-2463</p>
    <p>🏴 경기도 고양시 일산서구</p>
  </div>
      <script>
        $(function () {


          $("#btn-reply-save").on("click", () => {
            if ($("#reply-content").val() == "") {
              alert('내용을 입력하세요');
              return false;
            }
            let data = {
              qnaId: $("#qnaId").val(),
              content: $("#reply-content").val()
          };
          fetch(`/api/qna/${data.qnaId}/reply`, {
            body: JSON.stringify(data),
            headers:{"Content-Type": "application/json"},
            method: "POST"
          })
          .then((res) => {
            alert("댓글작성이 완료되었습니다.");
            location.href = `/qna/${data.qnaId}`;
          })

          })
        })
      </script>
</body>

</html>